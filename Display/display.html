<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="http://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <script src="http://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
    <style>
    .graph-master-container{
      width: 90%;
      display: inline-block; /* no idea why */
    }
    .graph-container {
      width: auto;
      float: left;
      border: 2px;
      border-color: black;
      border-style: groove;
      padding: 10px;
      margin: 10px;
    }
    .graph-container > header {
      text-align: center;
    }
    #temp_chart {
      width: 500px;
      float: left;
    }
    #humid_chart {
      width: 500px;
      float: left;
    }
    </style>
  </head>
  <body>
    <p>The data from your Produce Pod is displayed below. It will be automatically updated and will display data for a full week.</p>

    <table>
    <tr><th>IP Address</th><th>Uptime (hours)</th><th>Sensors</th></tr>
    <tr><td>50.148.123.452</td><td>72</td><td>Temperature | Humidity</td></tr>
    </table>

    <div class="graph-master-container">
      <div class="graph-container">
        <header>
          <h3>Temperature (C)</h3>
        </header>
        <div id="temp_chart" class="ct-chart ct-perfect-fourth"></div>
      </div>
      <div class="graph-container">
        <header>
          <h3>Humidity (%)</h3>
        </header>
        <div id="humid_chart" class="ct-chart ct-perfect-fourth"></div>
      </div>
    </div>

    <input style="display: block" type="submit" value="Update" id="1234">

    <p>To download the data as a csv file, please click the download button:</p>
     <form action="#">
      <input type="radio" name="download" value="1week" checked>1 Week<br/>
      <input type="radio" name="download" value="2week">2 Weeks<br/>
      <input type="radio" name="download" value="1month">1 month<br/>
      <br/>
      <input type="submit" value="Submit">
    </form>

    <script>

    var len_graphs = 20;
    var labels = Array.from(Array(len_graphs), (_,x) => x)

    var data_temp = {
      labels: labels,
      series: [  Array.from({length: len_graphs}, () => Math.floor(Math.random() * 3) + 20) ]
    };
    var data_humid = {
      labels: labels,
      series: [  Array.from({length: len_graphs}, () => Math.floor(Math.random() * 3) + 30) ]
    };

    var options_temp = {
      low: 10,
      high: 30,
    };
    var options_humidity = {
      low: 0,
      high: 100,
    };

    var temp_chart = new Chartist.Line('#temp_chart', data_temp, options_temp);
    var humid_chart = new Chartist.Line('#humid_chart', data_humid, options_humidity);

    function updateChart() {
      temp_chart.update({series: [Array.from({length: len_graphs}, () => Math.floor((Math.random() * 3) + 20))],
                        labels: labels });
      humid_chart.update({series: [Array.from({length: len_graphs}, () => Math.floor((Math.random() * 3) + 30))],
                        labels: labels });
      return;
    }
    document.getElementById("1234").onclick = updateChart;
    </script>

  </body
</html>
